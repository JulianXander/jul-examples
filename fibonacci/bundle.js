(()=>{var __webpack_modules__={509:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runJs=exports.repeat=exports.log=exports.timer$=exports.httpTextRequest$=exports.subscribe=exports.complete=exports.forEach=exports.parseJson=exports.sumFloat=exports.sum=exports.subtractFloat=exports.subtract=exports.modulo=exports.equal=exports.Type=exports._Error=exports._String=exports.NonZeroInteger=exports.Integer=exports.Float=exports._Boolean=exports.Any=exports.TypeOfType=exports.ComplementType=exports.UnionType=exports.IntersectionType=exports.TypeType=exports.ParameterReference=exports.FunctionType=exports.StreamType=exports.DictionaryLiteralType=exports.TupleType=exports.StringType=exports.FloatType=exports.IntegerType=exports.BooleanType=exports.AnyType=exports.BuiltInTypeBase=exports.deepEquals=exports._checkDictionaryType=exports._createFunction=exports._checkType=exports._callFunction=exports._branch=void 0;let processId=1;function _branch(e,...t){for(const r of t){const t=tryAssignParams(r.params,e);if(!(t instanceof Error))return r(t)}return new Error(`${e} did not match any branch`)}function _callFunction(e,t){if("params"in e){const r=tryAssignParams(e.params,t);return r instanceof Error?r:e(...r)}return Array.isArray(t)?e(...t):e(t)}function _checkType(e,t){return isOfType(t,e)?t:new Error(`${t} is not of type ${e}`)}function _createFunction(e,t){const r=e;return r.params=t,r}function _checkDictionaryType(e,t){return tryAssignParams(e,t)instanceof Error}function isOfType(e,t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":return e===t;case"object":if(t instanceof BuiltInTypeBase){const r=t;switch(r.type){case"any":case"reference":case"type":return!0;case"boolean":return"boolean"==typeof e;case"integer":return"bigint"==typeof e;case"float":return"number"==typeof e;case"string":return"string"==typeof e;case"error":return e instanceof Error;case"dictionary":{if(!isDictionary(e))return!1;const t=r.elementType;for(const r in e)if(!isOfType(e[r],t))return!1;return!0}case"dictionaryLiteral":{if(!isDictionary(e))return!1;const t=r.fields;for(const r in t)if(!isOfType(e[r],t[r]))return!1;return!0}case"list":return Array.isArray(e)&&e.every((e=>isOfType(e,r.elementType)));case"tuple":return Array.isArray(e)&&e.length<=r.elementTypes.length&&r.elementTypes.every(((t,r)=>isOfType(e[r],t)));case"stream":return e instanceof Stream;case"function":return"function"==typeof e;case"and":return r.choiceTypes.every((t=>isOfType(e,t)));case"or":return r.choiceTypes.some((t=>isOfType(e,t)));case"not":return!isOfType(e,r.sourceType);case"typeOf":return deepEquals(e,r.value);default:throw new Error(`Unexpected BuiltInType ${r.type}`)}}return deepEquals(e,t);case"function":return t(e);default:throw new Error("Unexpected type "+typeof t)}}function isDictionary(e){return!("object"!=typeof e||e instanceof BuiltInTypeBase||e instanceof Error||Array.isArray(e))}function tryAssignParams(e,t){const r=[],{type:n,singleNames:s,rest:o}=e;if(void 0!==n)return isOfType(t,n)?r:new Error(`Can not assign the value ${t} to params because it is not of type ${n}`);const a="object"==typeof t?t:[t],p=Array.isArray(a);let c=0;if(s)for(;c<s.length;c++){const e=s[c],{name:t,type:n}=e,o=p?a[c]:a[t];if(n&&!isOfType(o,n))return new Error(`Can not assign the value ${o} to param ${t} because it is not of type ${n}`);r.push(o)}if(o){const e=o.type;if(!p)throw new Error("tryAssignParams not implemented yet for rest dictionary");for(;c<a.length;c++){const t=a[c];if(e&&!isOfType(t,e))return new Error(`Can not assign the value ${t} to rest param because it is not of type ${o}`);r.push(t)}}return r}function deepEquals(e,t){const r=typeof e;if(r!==typeof t)return!1;switch(r){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":case"undefined":return e===t;case"object":if(null===e||null===t)return e===t;if(e instanceof Stream||t instanceof Stream)return e===t;if(Array.isArray(e)||Array.isArray(t)){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}{const r=e;for(const e in r)if(r[e]!==t[e])return!1;return!0}default:throw new Error("Unexpected type for deepEquals: "+r)}}exports._branch=_branch,exports._callFunction=_callFunction,exports._checkType=_checkType,exports._createFunction=_createFunction,exports._checkDictionaryType=_checkDictionaryType,exports.deepEquals=deepEquals;class BuiltInTypeBase{}exports.BuiltInTypeBase=BuiltInTypeBase;class AnyType extends BuiltInTypeBase{type="any"}exports.AnyType=AnyType;class BooleanType extends BuiltInTypeBase{type="boolean"}exports.BooleanType=BooleanType;class IntegerType extends BuiltInTypeBase{type="integer"}exports.IntegerType=IntegerType;class FloatType extends BuiltInTypeBase{type="float"}exports.FloatType=FloatType;class StringType extends BuiltInTypeBase{type="string"}exports.StringType=StringType;class ErrorType extends BuiltInTypeBase{type="error"}class ListType extends(null){elementType;constructor(e){super(),this.elementType=e}type="list"}class TupleType extends BuiltInTypeBase{elementTypes;constructor(e){super(),this.elementTypes=e}type="tuple"}exports.TupleType=TupleType;class DictionaryType extends(null){elementType;constructor(e){super(),this.elementType=e}type="dictionary"}class DictionaryLiteralType extends BuiltInTypeBase{fields;constructor(e){super(),this.fields=e}type="dictionaryLiteral"}exports.DictionaryLiteralType=DictionaryLiteralType;class StreamType extends BuiltInTypeBase{valueType;constructor(e){super(),this.valueType=e}type="stream"}exports.StreamType=StreamType;class FunctionType extends BuiltInTypeBase{paramsType;returnType;constructor(e,t){super(),this.paramsType=e,this.returnType=t,t instanceof ParameterReference&&(t.functionRef=this)}type="function"}exports.FunctionType=FunctionType;class ParameterReference extends BuiltInTypeBase{path;index;constructor(e,t){super(),this.path=e,this.index=t}type="reference";functionRef}exports.ParameterReference=ParameterReference;class TypeType extends BuiltInTypeBase{type="type"}exports.TypeType=TypeType;class IntersectionType extends BuiltInTypeBase{choiceTypes;constructor(e){super(),this.choiceTypes=e}type="and"}exports.IntersectionType=IntersectionType;class UnionType extends BuiltInTypeBase{choiceTypes;constructor(e){super(),this.choiceTypes=e}type="or"}exports.UnionType=UnionType;class ComplementType extends BuiltInTypeBase{sourceType;constructor(e){super(),this.sourceType=e}type="not"}exports.ComplementType=ComplementType;class TypeOfType extends BuiltInTypeBase{value;constructor(e){super(),this.value=e}type="typeOf"}exports.TypeOfType=TypeOfType;class Stream{constructor(e){this.getValue=e}lastValue;lastProcessId;completed=!1;listeners=[];onCompletedListeners=[];push(e,t){if(t!==this.lastProcessId&&!deepEquals(e,this.lastValue)){if(this.completed)throw new Error("Can not push to completed stream.");this.lastValue=e,this.lastProcessId=t,this.listeners.forEach((t=>t(e)))}}getValue;subscribe(e,t=!0){return t&&e(this.getValue()),this.completed?()=>{}:(this.listeners.push(e),()=>{if(this.completed)return;const t=this.listeners.indexOf(e);if(-1===t)throw new Error("Can not unsubscribe listener, because listener was not subscribed.");this.listeners.splice(t,1)})}complete(){this.completed||(this.completed=!0,this.listeners=[],this.onCompletedListeners.forEach((e=>{e()})),this.onCompletedListeners=[])}onCompleted(e){this.completed?e():this.onCompletedListeners.push(e)}}function createSource$(e){const t=new Stream((()=>t.lastValue));return t.push(e,processId),t}function of$(e){const t=createSource$(e);return t.complete(),t}function createDerived$(e){const t=new Stream((()=>processId===t.lastProcessId||t.completed?t.lastValue:e()));return t}function map$(e,t){let r;const n=createDerived$((()=>{const s=e.getValue();if(deepEquals(s,r))return n.lastProcessId=processId,n.lastValue;const o=t(s);return r=s,n.push(o,processId),o}));n.onCompleted((()=>{s()}));const s=e.subscribe((e=>{n.getValue()}));return e.onCompleted((()=>{n.complete()})),n}function combine$(...e){const t=createDerived$((()=>{const r=t.lastValue,n=e.map((e=>e.getValue()));return deepEquals(n,r)?(t.lastProcessId=processId,r):(t.push(n,processId),n)}));t.onCompleted((()=>{r.forEach(((e,t)=>{e()}))}));const r=e.map(((r,n)=>(r.onCompleted((()=>{e.some((e=>!e.completed))||t.complete()})),r.subscribe((e=>{t.getValue()})))));return t}function takeUntil$(e,t){const r=map$(e,(e=>e)),n=t.subscribe((()=>{r.complete()}),!1);return t.onCompleted((()=>{r.complete()})),r.onCompleted((()=>{n()})),r}function flatMerge$(e){const t=[],r=[],n=createDerived$((()=>{const t=n.lastValue,r=e.getValue().getValue();return deepEquals(r,t)?(n.lastProcessId=processId,t):(n.push(r,processId),r)})),s=e.subscribe((e=>{t.push(e);const s=e.subscribe((e=>{n.getValue()}));r.push(s)}));return n.onCompleted((()=>{s(),r.forEach((e=>{e()}))})),e.onCompleted((()=>{t.forEach((e=>{e.onCompleted((()=>{t.some((e=>!e.completed))||n.complete()}))}))})),n}function flatSwitch$(e){let t;const r=createDerived$((()=>{const t=r.lastValue,n=e.getValue().getValue();return deepEquals(n,t)?(r.lastProcessId=processId,t):(r.push(n,processId),n)})),n=e.subscribe((n=>{t=takeUntil$(n,e).subscribe((e=>{r.getValue()}))}));return r.onCompleted((()=>{n(),t?.()})),e.onCompleted((()=>{e.getValue().onCompleted((()=>{r.complete()}))})),r}function accumulate$(e,t,r){const n=map$(e,(e=>r(void 0===n.lastValue?t:n.lastValue,e)));return n}function retry$(e,t,r=1){return r===t?e():flatSwitch$(map$(e(),(n=>n instanceof Error?(console.log("Error! Retrying... Attempt:",r,"process:",processId),retry$(e,t,r+1)):of$(n))))}function parseJsonValue(e,t){let r=parseJsonWhiteSpace(e,t);const n=e[r];switch(n){case"n":return parseJsonToken(e,r,"null",null);case"t":return parseJsonToken(e,r,"true",!0);case"f":return parseJsonToken(e,r,"false",!1);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const t="-"===n,s=/(?<integer>0|[1-9][0-9]*)(\.(?<fraction>[0-9]+))?([eE](?<exponent>[-+]?[0-9]+))?/y;s.lastIndex=t?r+1:r;const o=s.exec(e);if(!o)return new Error(`Invalid JSON. Failed to parse number at position ${r}`);const a=(t?"-":"")+o.groups.integer,p=o.groups.fraction,c=BigInt(a+(p??"")),i=o.groups.exponent,u=(p?BigInt("-"+p.length):0n)+(i?BigInt(i):0n);return{parsed:u<0?{numerator:c,denominator:10n**(-1n*u)}:c*10n**u,endIndex:s.lastIndex}}case'"':return parseJsonString(e,r+1);case"[":{r++;const t=[];if(r=parseJsonWhiteSpace(e,r),"]"===e[r])return{parsed:t,endIndex:r+1};let n=!1;for(;r<e.length;)if(n){r=parseJsonWhiteSpace(e,r);const s=e[r];switch(s){case",":n=!1,r++;break;case"]":return{parsed:t,endIndex:r+1};default:return new Error(`Invalid JSON. Unexpected character ${s} at position ${r} while parsing array.`)}}else{const s=parseJsonValue(e,r);if(s instanceof Error)return s;t.push(s.parsed),n=!0,r=s.endIndex}}case"{":{r++;const t={};if(r=parseJsonWhiteSpace(e,r),"}"===e[r])return{parsed:t,endIndex:r+1};let n=!1;for(;r<e.length;){r=parseJsonWhiteSpace(e,r);const s=e[r];if(n)switch(s){case",":n=!1,r++;break;case"}":return{parsed:t,endIndex:r+1};default:return new Error(`Invalid JSON. Unexpected character ${s} at position ${r} while parsing object.`)}else{if('"'!==s)return new Error(`Invalid JSON. Unexpected character ${s} at position ${r} while parsing object key.`);const o=parseJsonString(e,r);if(o instanceof Error)return o;const a=parseJsonWhiteSpace(e,o.endIndex);if(":"!==e[a])return new Error(`Invalid JSON. Unexpected character ${s} at position ${r} while parsing colon.`);const p=parseJsonValue(e,a+1);if(p instanceof Error)return p;t[o.parsed]=p.parsed,n=!0,r=p.endIndex}}}default:return new Error(`Invalid JSON. Unexpected character ${n} at position ${r}`)}}function parseJsonWhiteSpace(e,t){const r=/[ \n\r\t]*/y;return r.lastIndex=t,r.exec(e),r.lastIndex}function parseJsonToken(e,t,r,n){const s=t+r.length;return e.substring(t,s)!==r?new Error(`Inavlid JSON. Failed to parse value ${r} at position ${t}`):{parsed:n,endIndex:s}}function parseJsonString(e,t){let r="";for(let n=t;n<e.length;n++){const t=e[n];switch(t){case'"':return{parsed:r,endIndex:n+1};case"\\":if(n++,n===e.length)return new Error("Invalid JSON. String not terminated.");const s=e[n];switch(s){case'"':case"\\":case"/":case"b":case"f":case"n":case"r":case"t":r+=s;break;case"u":n++;const t=n+4;if(t>=e.length)return new Error("Invalid JSON. String not terminated.");const o=e.substring(n,t);if(!/[0-9a-fA-F]{4}/.test(o))return new Error(`Invalid JSON. Invalid hex code at position ${n}.`);r+=String.fromCharCode(parseInt(o,16)),n=t-1;break;default:return new Error}break;default:r+=t}}return new Error("Invalid JSON. String not terminated.")}exports.Any=new AnyType,exports._Boolean=new BooleanType,exports.Float=new FloatType,exports.Integer=new IntegerType,exports.NonZeroInteger=new UnionType([exports.Integer,new ComplementType(0)]),exports._String=new StringType,exports._Error=new ErrorType,exports.Type=new TypeType,exports.equal=_createFunction(((e,t)=>e===t),{singleNames:[{name:"first"},{name:"second"}]}),exports.modulo=_createFunction(((e,t)=>e%t),{singleNames:[{name:"dividend"},{name:"divisor"}]}),exports.subtract=_createFunction(((e,t)=>"bigint"==typeof e?"bigint"==typeof t?e-t:{numerator:e*t.denominator-t.numerator,denominator:t.denominator}:"bigint"==typeof t?{numerator:e.numerator-t*e.denominator,denominator:e.denominator}:{numerator:e.numerator*t.denominator-t.numerator*e.denominator,denominator:e.denominator*t.denominator}),{singleNames:[{name:"minuend"},{name:"subtrahend"}]}),exports.subtractFloat=_createFunction(((e,t)=>e-t),{singleNames:[{name:"minuend"},{name:"subtrahend"}]}),exports.sum=_createFunction(((...e)=>e.reduce(((e,t)=>"bigint"==typeof e?"bigint"==typeof t?e+t:{numerator:e*t.denominator+t.numerator,denominator:t.denominator}:"bigint"==typeof t?{numerator:e.numerator+t*e.denominator,denominator:e.denominator}:{numerator:e.numerator*t.denominator+t.numerator*e.denominator,denominator:e.denominator*t.denominator}),0n)),{rest:{}}),exports.sumFloat=_createFunction(((...e)=>e.reduce(((e,t)=>e+t),0)),{rest:{}}),exports.parseJson=_createFunction((e=>{const t=parseJsonValue(e,0);if(t instanceof Error)return t;const r=parseJsonWhiteSpace(e,t.endIndex);return r<e.length?new Error(`Invalid JSON. Unexpected extra charcter ${e[r]} after parsed value at position ${r}`):t.parsed}),{singleNames:[{name:"json"}]}),exports.forEach=_createFunction(((e,t)=>(e.forEach(t),null)),{singleNames:[{name:"values"},{name:"callback"}]}),exports.complete=_createFunction((e=>(e.complete(),null)),{singleNames:[{name:"stream$"}]}),exports.subscribe=_createFunction(((e,t)=>e.subscribe((e=>{_callFunction(t,[e])}))),{singleNames:[{name:"stream$"},{name:"listener"}]}),exports.httpTextRequest$=_createFunction(((e,t,r,n)=>{const s=new AbortController,o=createSource$(null);return o.onCompleted((()=>{s.abort()})),fetch(e,{method:t,headers:r,body:n,signal:s.signal}).then((e=>{if(e.ok)return e.text();throw new Error(e.statusText)})).then((e=>{processId++,o.push(e,processId)})).catch((e=>{processId++,o.push(e,processId)})).finally((()=>{o.complete()})),o}),{singleNames:[{name:"url"},{name:"method"},{name:"body"}]}),exports.timer$=_createFunction((e=>{const t=createSource$(1),r=()=>{setTimeout((()=>{t.completed||(processId++,t.push(t.lastValue+1,processId),r())}),e)};return r(),t}),{singleNames:[{name:"delayMs"}]}),exports.log=_createFunction(console.log,{rest:{}}),exports.repeat=_createFunction(((e,t)=>{for(let r=1n;r<=e;r++)t(r)}),{singleNames:[{name:"count"},{name:"iteratee"}]}),exports.runJs=_createFunction(eval,{singleNames:[{name:"js"}]})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{const{_branch:e,_callFunction:t,_checkType:r,_createFunction:n,_checkDictionaryType:s,deepEquals:o,BuiltInTypeBase:a,AnyType:p,BooleanType:c,IntegerType:i,FloatType:u,StringType:l,TupleType:y,DictionaryLiteralType:d,StreamType:m,FunctionType:f,ParameterReference:T,TypeType:h,IntersectionType:x,UnionType:g,ComplementType:_,TypeOfType:I,Any:b,_Boolean:w,Float:E,Integer:B,NonZeroInteger:$,_String:S,_Error:F,Type:v,equal:J,modulo:A,subtract:k,subtractFloat:O,sum:C,sumFloat:N,parseJson:V,forEach:q,complete:P,subscribe:D,httpTextRequest$:U,timer$:L,log:R,repeat:j,runJs:W}=__webpack_require__(509),M=n(((r,s,o)=>e(r,n((()=>o),{type:0n}),n((()=>t(M,[t(k,[r,1n]),t(C,[s,o]),s])),{}))),{singleNames:[{name:"countdown",type:B},{name:"current",type:B},{name:"previous",type:B}]}),Z=n((e=>t(M,[e,1n,0n])),{singleNames:[{name:"x",type:B}]}),z=t(Z,[12n]);t(R,[z])})()})();